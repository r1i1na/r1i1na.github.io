const CountdownTimer=(()=>{const n={units:{day:{text:"今日",divider:1,unit:"小时"},week:{text:"本周",divider:24,unit:"天"},month:{text:"本月",divider:24,unit:"天"},year:{text:"本年",divider:24,unit:"天"}}};function e(e){const t=new Date,i=new Date(t.setHours(0,0,0,0)),a=new Date(t.setHours(23,59,59,999));if("day"===e){const t=(new Date).getHours(),i=24-t,a=t/24*100;return{name:n.units[e].text,remaining:i,percentage:a.toFixed(2),unit:n.units[e].unit}}const o={week:()=>{i.setDate(i.getDate()-i.getDay()),a.setDate(a.getDate()-a.getDay()+6)},month:()=>{i.setDate(1),a.setMonth(a.getMonth()+1,0)},year:()=>{i.setMonth(0,1),a.setMonth(11,31)}};o[e]?.();const c="day"===e?24:Math.floor((a-i)/864e5)+1,r=Math.floor((t-i)/(36e5*n.units[e].divider)),s=r/c*100;return{name:n.units[e].text,remaining:c-r,percentage:s.toFixed(2),unit:n.units[e].unit}}function t(){const t=["eventName","eventDate","daysUntil","countRight"].map((n=>document.getElementById(n)));if(t.some((n=>!n)))return;const[i,a,o,c]=t,r=Object.keys(n.units).reduce(((n,t)=>({...n,[t]:e(t)})),{}),s=Math.round((new Date(a.textContent)-(new Date).setHours(0,0,0,0))/864e5);o.textContent=s,c.innerHTML=Object.entries(r).map((([n,e])=>`\n                <div class="cd-count-item">\n                    <div class="cd-item-name">${e.name}</div>\n                    <div class="cd-item-progress">\n                        <div class="cd-progress-bar" style="width: ${e.percentage}%; opacity: ${e.percentage/100}"></div>\n                        <span class="cd-percentage ${e.percentage>=46?"cd-many":""}">${e.percentage}%</span>\n                        <span class="cd-remaining ${e.percentage>=60?"cd-many":""}">\n                            <span class="cd-tip">还剩</span>${e.remaining}<span class="cd-tip">${e.unit}</span>\n                        </span>\n                    </div>\n                </div>\n            `)).join("")}let i;const a=()=>{!function(){const n=document.createElement("style");n.textContent='\n            .card-countdown .item-content {\n                display: flex;\n            }\n            .cd-count-left {\n                position: relative;\n                display: flex;\n                flex-direction: column;\n                margin-right: 0.8rem;\n                line-height: 1.5;\n                align-items: center;\n                justify-content: center;\n            }\n            .cd-count-left .cd-text {\n                font-size: 14px;\n            }\n            .cd-count-left .cd-name {\n                font-weight: bold;\n                font-size: 18px;\n            }\n            .cd-count-left .cd-time {\n                font-size: 30px;\n                font-weight: bold;\n                color: var(--anzhiyu-main);\n            }\n            .cd-count-left .cd-date {\n                font-size: 12px;\n                opacity: 0.6;\n            }\n            .cd-count-left::after {\n                content: "";\n                position: absolute;\n                right: -0.8rem;\n                width: 2px;\n                height: 80%;\n                background-color: var(--anzhiyu-main);\n                opacity: 0.5;\n            }\n            .cd-count-right {\n                flex: 1;\n                margin-left: .8rem;\n                display: flex;\n                flex-direction: column;\n                justify-content: space-between;\n            }\n            .cd-count-item {\n                display: flex;\n                flex-direction: row;\n                align-items: center;\n                height: 24px;\n            }\n            .cd-item-name {\n                font-size: 14px;\n                margin-right: 0.8rem;\n                white-space: nowrap;\n            }\n            .cd-item-progress {\n                position: relative;\n                display: flex;\n                flex-direction: row;\n                align-items: center;\n                justify-content: space-between;\n                height: 100%;\n                width: 100%;\n                border-radius: 8px;\n                background-color: var(--anzhiyu-background);\n                overflow: hidden;\n            }\n            .cd-progress-bar {\n                height: 100%;\n                border-radius: 8px;\n                background-color: var(--anzhiyu-main);\n            }\n            .cd-percentage,\n            .cd-remaining {\n                position: absolute;\n                font-size: 12px;\n                margin: 0 6px;\n                transition: opacity 0.3s ease-in-out, transform 0.3s ease-in-out;\n            }\n            .cd-many {\n                color: #fff;\n            }\n            .cd-remaining {\n                opacity: 0;\n                transform: translateX(10px);\n            }\n            .card-countdown .item-content:hover .cd-remaining {\n                transform: translateX(0);\n                opacity: 1;\n            }\n            .card-countdown .item-content:hover .cd-percentage {\n                transform: translateX(-10px);\n                opacity: 0;\n            }\n        ',document.head.appendChild(n)}(),t(),i=setInterval(t,6e5)};return["pjax:complete","DOMContentLoaded"].forEach((n=>document.addEventListener(n,a))),document.addEventListener("pjax:send",(()=>i&&clearInterval(i))),{start:a,stop:()=>i&&clearInterval(i)}})();